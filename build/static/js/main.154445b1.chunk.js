(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(37)},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),s=t.n(o),c=(t(5),t(2)),u=t(3),l=t.n(u),i="/api/persons",m=function(){return l.a.get(i).then((function(e){return e.data}))},d=function(e){return l.a.post(i,e).then((function(e){return e.data}))},f=function(e){return l.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},p=function(e,n){return l.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){var n=e.persons,t=e.setPersons,o=e.handleNameChange,s=e.setStatusMessage,u=Object(a.useState)(""),l=Object(c.a)(u,2),i=l[0],m=l[1],f=Object(a.useState)(""),g=Object(c.a)(f,2),h=g[0],b=g[1];return r.a.createElement("form",null,r.a.createElement("div",null,"name:"," ",r.a.createElement("input",{value:h,onChange:function(e){return o(e,b)}})),r.a.createElement("div",null,"number:"," ",r.a.createElement("input",{value:i,onChange:function(e){return o(e,m)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:function(e){var a=n.find((function(e){return e.name===h}));(e.preventDefault(),a)?(console.log(a),window.confirm("".concat(a.name," is already added to phonebook, replace the old number with a new one?"))&&p(a.id,{id:a.id,name:a.name,number:i}).then((function(e){var r=n.filter((function(e){return e.id!==a.id})).concat(e);t(r),m(""),b("")})).catch((function(e){return s([{message:"Information of ".concat(h," has already been updated"),messageGood:!1}])}))):(d({name:h,number:i}).then((function(e){t(n.concat(e)),m(""),b("")})).catch((function(e){console.log(e.response.data.error),s([{message:"".concat(e.response.data.error),messageGood:!1}])})),s([{message:"Added ".concat(h),messageGood:!0}]))}},"add")))},h=function(e){var n=e.name,t=e.number,a=e.id,o=e.persons,s=e.setPersons,c=e.setStatusMessage;return r.a.createElement("div",null,r.a.createElement("p",null,n," ",t,r.a.createElement("button",{onClick:function(){if(window.confirm("Delete ".concat(n," ?"))){f(a).catch((function(e){return c([{message:"Information of ".concat(n," has already been removed from server"),messageGood:!1}])})),s(o.filter((function(e){return e.id!==a})))}}},"delete")))},b=function(e){var n=e.newFilter,t=e.persons,a=e.setPersons,o=e.setStatusMessage,s=n?t.filter((function(e){return e.name.toUpperCase().includes(n.toUpperCase())})):t;return r.a.createElement("div",null,s.map((function(e){return r.a.createElement(h,{key:e.name,name:e.name,number:e.number,id:e.id,persons:t,setPersons:a,setStatusMessage:o})})))},E=function(e){var n=e.message,t=e.messageGood;return""===n?null:(console.log(t),t?r.a.createElement("div",{className:"success"},n):r.a.createElement("div",{className:"error"},n))},v=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],s=Object(a.useState)(""),u=Object(c.a)(s,2),l=u[0],i=u[1],d=Object(a.useState)([{message:"",messageGood:!0}]),f=Object(c.a)(d,2),p=f[0],h=f[1];Object(a.useEffect)((function(){m().then((function(e){o(e)}))}),[]);var v=function(e,n){n(e.target.value)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{message:p[0].message,messageGood:p[0].messageGood}),r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{value:l,onChange:function(e){return v(e,i)}})),r.a.createElement("h2",null,"add a new"),r.a.createElement(g,{persons:t,setPersons:o,handleNameChange:v,setStatusMessage:h}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(b,{newFilter:l,persons:t,setPersons:o,setStatusMessage:h}))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root"))},5:function(e,n,t){}},[[15,1,2]]]);
//# sourceMappingURL=main.154445b1.chunk.js.map